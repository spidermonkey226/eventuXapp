<p>file-upload works!</p>
<!-- src/app/file-upload/file-upload.component.html -->
<section class="upload-card">
  <h1 class="title">File upload</h1>

  <!-- Event context info / errors -->
  <p class="msg err" *ngIf="listError">{{ listError }}</p>

  <!-- Existing files -->
  <div class="selected" *ngIf="!listError">
    <h2>Existing files</h2>

    <div *ngIf="loadingList" class="state loading">
      <div class="spinner" aria-hidden="true"></div><span>Loading…</span>
    </div>

    <ul *ngIf="!loadingList">
      <li *ngFor="let f of existingFiles">
        <div class="file-row">
          <div class="meta">
            <strong>{{ f.name }}</strong>
            <small *ngIf="f.type || f.size">{{ (f.type || 'Unknown type') }}<ng-container *ngIf="f.size"> • {{ f.size }}</ng-container></small>
          </div>
          <button type="button" class="remove" (click)="deleteServerFile(f.id)">Delete</button>
        </div>
      </li>
      <li *ngIf="existingFiles.length === 0" class="muted">No files yet.</li>
    </ul>
  </div>

  <!-- Upload new -->
  <form (submit)="onSubmit($event)" *ngIf="!listError">
    <label class="file-picker" for="fileInput">
      <input
        id="fileInput"
        type="file"
        (change)="onFilesSelected($event)"
        [attr.multiple]="allowMultiple ? '' : null"
        [accept]="acceptTypes"
      />
      <span>Choose file(s)</span>
    </label>

    <div class="selected" *ngIf="files.length">
      <h2>Selected ({{ files.length }})</h2>
      <ul>
        <li *ngFor="let f of files; let i = index">
          <div class="file-row">
            <div class="meta">
              <strong>{{ f.name }}</strong>
              <small>{{ f.type || 'Unknown type' }} • {{ (f.size / 1024) | number:'1.0-0' }}KB</small>
            </div>
            <button type="button" class="remove" (click)="remove(i)">Remove</button>
          </div>
        </li>
      </ul>
    </div>

    <div class="actions">
      <button type="submit" [disabled]="!files.length || uploading">
        {{ uploading ? 'Uploading…' : 'Upload' }}
      </button>
      <button type="button" class="secondary" (click)="clear()" [disabled]="!files.length || uploading">
        Clear
      </button>
    </div>

    <p class="hint">Max {{ maxSizeMB }}MB per file. Allowed types: {{ acceptTypes || 'Any' }}</p>

    <p class="msg ok" *ngIf="message && success">{{ message }}</p>
    <p class="msg err" *ngIf="message && !success">{{ message }}</p>
  </form>
</section>
